(function(h,E,s,M){function R(a,b){function o(a,b){m=Math.min(a,m);f=Math.min(b,f);e=Math.max(a,e);d=Math.max(b,d)}var y=0,z=0,c=0,e=0,d=0,m=0,f=0,B=[{method:"moveTo",args:[0,0]}],r=[],n={},k={rotate:null,callback:null,name:null};this.rotate=function(a,o){var p=h.extend({},k,o),g=Math.abs(a-c),g=Math.round(g/b)*j,e=(a-c)/g,d=1;if(!H)return(p.name||p.callback)&&this.moveTo(y,z,{callback:p.callback,name:p.name}),this;for(;d<=g;d++)r.push({x:y,y:z,rotate:c+e*d,callback:d===g?p.callback:null});p.name&&
(n[p.name]=r.length-1);c=a%(Math.PI*2);return this};this.moveTo=function(a,b,p){var g=h.extend({},k,p),e=r.length?j:1;for(i=0;i<e;i++)r.push({x:a,y:b,rotate:g.rotate!==null?g.rotate:c,callback:i===e-1?g.callback:null});g.name&&(n[g.name]=r.length-1);y=a;z=b;o(a,b);B.push({method:"moveTo",args:arguments});return this};this.lineTo=function(b,e,p){var g=h.extend({},k,p),d=b-y,f=e-z,t=Math.sqrt(d*d+f*f),t=Math.round(t/a)*j;d/=t;f/=t;for(var u=g.rotate!==null&&H,m=u?(g.rotate-c)/t:0,v=1;v<=t;v++)r.push({x:y+
d*v,y:z+f*v,rotate:c+m*v,callback:v===t?g.callback:null});g.name&&(n[g.name]=r.length-1);c=u?g.rotate:c;y=b;z=e;o(b,e);B.push({method:"lineTo",args:arguments});return this};this.arc=function(b,e,d,g,f,m,t){var u=h.extend({},k,t),x=b+Math.cos(g)*d,v=e+Math.sin(g)*d,s=b+Math.cos(f)*d,D=e+Math.sin(f)*d,w,C=g;w=f;var l=m,F=I(C),q=I(w),A=Math.abs(F-q),E=Math.PI*2-A;w=l&&F<q||!l&&F>q||F===q&&C!==w?E:A;C=Math.round(d*w/a)*j;w=w/C*(m?-1:1);F=(l=u.rotate!==null&&H)?(u.rotate-c)/C:0;q=1;for((y!==x||z!==v)&&
this.lineTo(x,v);q<=C;q++)r.push({x:b+d*Math.cos(g+w*q),y:e+d*Math.sin(g+w*q),rotate:c+F*q,callback:q===C?u.callback:null});u.name&&(n[u.name]=r.length-1);c=l?u.rotate:c;y=s;z=D;o(b+d,e+d);o(b-d,e-d);B.push({method:"arc",args:arguments});return this};this.getPath=function(){return r};this.getNameMap=function(){return n};this.getCanvasPath=function(){for(var a=0;a<B.length;a++)B[a].args[0]-=this.getPathOffsetX(),B[a].args[1]-=this.getPathOffsetY();return B};this.getPathWidth=function(){return e-m+
40};this.getPathHeight=function(){return d-f+40};this.getPathOffsetX=function(){return m-20};this.getPathOffsetY=function(){return f-20}}function S(){D.scrollBar&&(f=h("<div>").addClass("sp-scroll-bar").on("click",function(a){var b=Math.round(a.offsetY/f.height()*(c.length-1));Math.abs(b-e)>5&&(b=e+5*j*(b>e?1:-1));n(b);a.preventDefault();return!1}),l=h("<div>").addClass("sp-scroll-handle").on({click:function(a){a.preventDefault();return!1},mousedown:function(a){if(a.button===0)return J=!0,a.preventDefault(),
!1}}),h(s).on({mouseup:function(){J=!1},mousemove:function(a){if(J){var a=a.clientY-f.offset().top,a=N(Math.round(a/f.height()*(c.length-1)),0,c.length-1),b=a%j;n(b>j/2?a+j-b:a-b)}}}),h("body").prepend(f.append(l)))}function T(){if(D.drawPath&&U){var a;a={position:"absolute","z-index":9998,left:d.getPathOffsetX(),top:d.getPathOffsetY(),"pointer-events":"none"};a[k+"user-select"]=a["user-select"]="none";a[k+"user-drag"]=a["user-drag"]="none";a=h("<canvas>").addClass("sp-canvas").css(a).prependTo(G);
a[0].width=d.getPathWidth();a[0].height=d.getPathHeight();a=a[0].getContext("2d");var b=d.getCanvasPath(),o=0;a.shadowBlur=15;a.shadowColor="black";a.strokeStyle="white";a.lineJoin="round";a.lineCap="round";for(a.lineWidth=10;o<b.length;o++)a[b[o].method].apply(a,b[o].args);a.stroke()}}function O(a){var b=a.originalEvent.wheelDelta||-a.originalEvent.detail;b/=Math.abs(b);a.preventDefault();h(E).scrollTop(0).scrollLeft(0);A(-b*j)}function V(a){if(!/^text/.test(a.target.type))switch(a.keyCode){case 40:A(j);
break;case 38:A(-j);break;case 32:A(5*j*(a.shiftKey?-1:1))}}function A(a){n(P(e+a))}function W(a,b,d,c){if(!(a===0||x)){if(!b||typeof b!=="number")return typeof b==="function"&&b(),A(a);x=!0;var f=b/1E3*X,j=e,k=0,l,m,s=setInterval(function(){l=Math.round((h.easing[d]||h.easing.swing)(++k/f,b/f*k,0,a,b));m=P(j+l);k===f&&(clearInterval(s),typeof d==="function"?d():c&&c(),x=!1);n(m,!0)},b/f)}}function n(a,b){if(!x||b){var d=c[a].callback;G.css(Y(c[a]));l&&l.css("top",a/(c.length-1)*(f.height()-l.height())+
"px");d&&a!==e&&!x&&d();e=a}}function P(a){if(D.wrapAround)if(x){for(;a<0;)a+=c.length;for(;a>=c.length;)a-=c.length}else a<0&&(a=c.length-1),a>=c.length&&(a=0);else a=N(a,0,c.length-1);return a}function Y(a){var b=a.x-h(E).width()/2,d=a.y-h(E).height()/2,c={};I(a.rotate)===0?(c.left=-b,c.top=-d,c[k+"transform-origin"]=c["transform-origin"]="",c[k+"transform"]=c.transform=""):(c.left=c.top="",c[k+"transform-origin"]=c["transform-origin"]=a.x+"px "+a.y+"px",c[k+"transform"]=c.transform="translate("+
-b+"px, "+-d+"px) rotate("+a.rotate+"rad)");return c}function N(a,b,c){if(a>c)return c;else if(a<b)return b;return a}function I(a){for(;a<0;)a+=Math.PI*2;return a%(Math.PI*2)}var k="-"+function(){var a=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,b=s.getElementsByTagName("script")[0],c;for(c in b.style)if(a.test(c))return c.match(a)[0];return"WebkitOpacity"in b.style?"Webkit":"KhtmlOpacity"in b.style?"Khtml":""}().toLowerCase()+"-",H=function(){for(var a=s.createElement("dummy").style,b="transform,WebkitTransform,MozTransform,OTransform,msTransform,KhtmlTransform".split(","),
c=0;c<b.length;c++)if(a[b[c]]!==M)return!0;return!1}(),U=!!s.createElement("canvas").getContext,X=30,j=10,Q=!1,J=!1,x=!1,e,d,c,G,f,l,K={scrollSpeed:50,rotationSpeed:Math.PI/15},D={wrapAround:!1,drawPath:!1,scrollBar:!0},L={init:function(a){(this.length>1||Q)&&h.error("jQuery.scrollPath can only initialized on *one* element *once*");h.extend(D,a);Q=!0;G=this;c=d.getPath();T();S();n(0);G.css("position","relative");h(s).on({mousewheel:O,DOMMouseScroll:O,keydown:V,mousedown:function(a){if(a.button===
1)return a.preventDefault(),!1}});h(E).on("resize",function(){n(e)});return this},getPath:function(a){h.extend(K,a);return d||(d=new R(K.scrollSpeed,K.rotationSpeed))},scrollTo:function(a,b,f,k){var j=d.getNameMap()[a];j===M&&h.error("jQuery.scrollPath could not find scroll target with name '"+a+"'");a=j-e;D.wrapAround&&Math.abs(a)>c.length/2&&(a=j>e?-e-c.length+j:c.length-e+j);W(a,b,f,k);return this}};h.fn.scrollPath=function(a){if(L[a])return L[a].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof a==="object"||!a)return L.init.apply(this,arguments);else h.error("Method "+a+" does not exist on jQuery.scrollPath")}})(jQuery,window,document);
